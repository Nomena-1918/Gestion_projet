import{_ as w,a,o as r,c as l,b as s,t as d,d as C,w as p,v,F as h,r as S,e as u,f,g as L,h as y,n as b}from"./index-c433af20.js";const _={data(){return{user:JSON.parse(localStorage.getItem("user"))||null,showProfileMenu:!1,sequence:{},scenes:[],statutsScene:[],filterTimePeriod:"all",filterStatut:"",showEditModal:!1,editingScene:{idScene:null,titre:"",synopsis:"",ordre:null,statutId:null},showCommentSection:!1,newComment:"",comments:[],commentCount:0,showSynopsisModal:!1,selectedScene:{},showSceneCommentModal:!1,sceneComments:[],newSceneComment:"",selectedScene:{},showAddLieuModal:!1,selectedSceneForLieu:null,lieux:[],plateaux:[],selectedLieu:null,selectedPlateau:null,descriptionUtilisation:"",newLieuModal:!1,newPlateauModal:!1,newLieu:{nomLieu:"",typeLieu:"",adresse:""},newPlateau:{nom:"",typePlateau:"",description:""},showAddLieuModal:!1,selectedLieuId:null,selectedPlateauId:null,plateauxDisponibles:[],lieuDescription:"",lieuxDisponibles:[],sceneLieus:[],selectedScene:{},selectedSceneComediens:[],selectedSceneLieus:[],editError:"",orderError:"",suggestedOrder:null,existingOrders:[],originalOrder:null}},computed:{userInitials(){var e;return(e=this.user)!=null&&e.nom?this.user.nom.split(" ").map(m=>m[0]).join("").toUpperCase():""},filteredScenes(){let o=this.scenes;this.filterStatut&&(o=o.filter(m=>m.statutNom===this.filterStatut));const e=new Date;return o=o.filter(m=>{const c=new Date(m.modifieLe);switch(this.filterTimePeriod){case"today":return c.toDateString()===e.toDateString();case"this_week":const n=new Date(e);return n.setDate(e.getDate()-7),c>=n;case"this_month":return c.getMonth()===e.getMonth()&&c.getFullYear()===e.getFullYear();case"this_year":return c.getFullYear()===e.getFullYear();case"recent":const i=new Date(e);return i.setDate(e.getDate()-7),c>=i;default:return!0}}),o}},async created(){await this.loadSequence(),await this.loadScenes(),await this.loadStatutsScene(),await this.loadCommentCount(),document.addEventListener("click",this.handleClickOutside),await this.loadLieuxDisponibles()},beforeDestroy(){document.removeEventListener("click",this.handleClickOutside)},methods:{async loadSequence(){try{const o=await a.get(`/api/sequences/${this.$route.params.id}`);this.sequence=o.data}catch(o){console.error("Erreur lors du chargement de la s√©quence:",o)}},async loadEpisode(){try{const o=await a.get(`/api/episodes/${this.$route.params.id}`);this.episode=o.data}catch(o){console.error("Erreur lors du chargement de l'√©pisode:",o)}},async loadScenes(){try{const o=await a.get(`/api/scenes/sequences/${this.$route.params.id}`);this.scenes=o.data;for(let e of this.scenes)try{const m=await a.get(`/api/scene-commentaires/scene/${e.idScene}/count`);e.commentCount=m.data}catch(m){console.error("Erreur lors du chargement du nombre de commentaires pour la sc√®ne:",m),e.commentCount=0}}catch(o){console.error("Erreur lors du chargement des sc√®nes:",o)}},async loadStatutsScene(){try{const o=await a.get("/api/statuts-scene");this.statutsScene=o.data}catch(o){console.error("Erreur lors du chargement des statuts:",o)}},async loadComments(){try{const o=await a.get(`/api/sequence-commentaires/sequence/${this.$route.params.id}`);this.comments=o.data}catch(o){console.error("Erreur lors du chargement des commentaires:",o)}},async loadCommentCount(){try{const o=await a.get(`/api/sequence-commentaires/sequence/${this.$route.params.id}/count`);this.commentCount=o.data}catch(o){console.error("Erreur lors du chargement du nombre de commentaires:",o)}},async toggleCommentSection(){this.showCommentSection=!this.showCommentSection,this.showCommentSection&&await this.loadComments()},async addComment(){if(this.newComment.trim())try{await a.post("/api/sequence-commentaires",{contenu:this.newComment,sequenceId:this.$route.params.id},{headers:{"X-User-Id":this.user.id}}),this.newComment="",await this.loadComments(),await this.loadCommentCount()}catch(o){console.error("Erreur lors de l'ajout du commentaire:",o),alert("Erreur lors de l'ajout du commentaire")}},async deleteComment(o){if(confirm("√ätes-vous s√ªr de vouloir supprimer ce commentaire ?"))try{await a.delete(`/api/sequence-commentaires/${o}`),await this.loadComments(),await this.loadCommentCount()}catch(e){console.error("Erreur lors de la suppression du commentaire:",e)}},async openSceneComments(o){this.selectedScene=o,await this.loadSceneComments(o.idScene),this.showSceneCommentModal=!0},async loadSceneComments(o){try{const e=await a.get(`/api/scene-commentaires/scene/${o}`);this.sceneComments=e.data}catch(e){console.error("Erreur lors du chargement des commentaires de sc√®ne:",e)}},async addSceneComment(){if(this.newSceneComment.trim())try{await a.post("/api/scene-commentaires",{contenu:this.newSceneComment,sceneId:this.selectedScene.idScene},{headers:{"X-User-Id":this.user.id}}),this.newSceneComment="",await this.loadSceneComments(this.selectedScene.idScene),await this.loadScenes()}catch(o){console.error("Erreur lors de l'ajout du commentaire:",o),alert("Erreur lors de l'ajout du commentaire")}},async deleteSceneComment(o){if(confirm("√ätes-vous s√ªr de vouloir supprimer ce commentaire ?"))try{await a.delete(`/api/scene-commentaires/${o}`),await this.loadSceneComments(this.selectedScene.idScene),await this.loadScenes()}catch(e){console.error("Erreur lors de la suppression du commentaire:",e)}},startEditScene(o){this.editingScene={idScene:o.idScene,titre:o.titre,synopsis:o.synopsis,ordre:o.ordre,statutId:this.getStatutIdByNom(o.statutNom)},this.originalOrder=o.ordre,this.showEditModal=!0,this.loadExistingOrders()},async loadExistingOrders(){try{const o=await a.get(`/api/scenes/sequences/${this.$route.params.id}`);this.existingOrders=o.data.filter(e=>e.idScene!==this.editingScene.idScene).map(e=>e.ordre),this.calculateSuggestedOrder()}catch(o){console.error("Erreur lors du chargement des ordres existants:",o)}},calculateSuggestedOrder(){if(this.existingOrders.length===0)this.suggestedOrder=1;else{const o=Math.max(...this.existingOrders);this.suggestedOrder=o+1}},validateOrder(){if(!this.editingScene.ordre){this.orderError="L'ordre est requis";return}const o=parseInt(this.editingScene.ordre);if(o<1){this.orderError="L'ordre doit √™tre un nombre positif";return}if(this.existingOrders.includes(o)&&o!==this.originalOrder){this.orderError=`L'ordre ${o} existe d√©j√† pour cette s√©quence. Veuillez choisir un autre num√©ro.`;return}this.orderError=""},useSuggestedOrder(){this.editingScene.ordre=this.suggestedOrder,this.validateOrder()},getStatutIdByNom(o){const e=this.statutsScene.find(m=>m.nomStatutsScene===o);return e?e.id:null},async saveEditedScene(){var o,e,m,c,n,i;if(this.validateOrder(),!this.orderError)try{const t=await a.put(`/api/scenes/${this.editingScene.idScene}`,{titre:this.editingScene.titre,synopsis:this.editingScene.synopsis,ordre:parseInt(this.editingScene.ordre),statutId:this.editingScene.statutId});this.showEditModal=!1,this.editError="",this.orderError="",await this.loadScenes()}catch(t){console.error("Erreur lors de la mise √† jour de la sc√®ne:",t),((o=t.response)==null?void 0:o.status)===400&&((c=(m=(e=t.response)==null?void 0:e.data)==null?void 0:m.message)!=null&&c.includes("ordre"))?(this.orderError="Cet ordre existe d√©j√† pour cette s√©quence. Veuillez choisir un autre num√©ro.",this.editError="Erreur de validation: "+this.orderError):this.editError=((i=(n=t.response)==null?void 0:n.data)==null?void 0:i.message)||"Erreur lors de la mise √† jour de la sc√®ne"}},closeEditModal(){this.showEditModal=!1,this.editingScene={idScene:null,titre:"",synopsis:"",ordre:null,statutId:null},this.editError="",this.orderError="",this.suggestedOrder=null,this.existingOrders=[],this.originalOrder=null},async openAddLieuModal(o){this.selectedScene=o,this.showAddLieuModal=!0,await this.loadSceneLieus(o.idScene)},closeAddLieuModal(){this.showAddLieuModal=!1,this.selectedLieuId=null,this.lieuDescription="",this.sceneLieus=[],this.selectedScene={}},async loadLieuxDisponibles(){try{console.warn("Impossible de trouver le projetId, chargement de tous les lieux");const o=await a.get("/api/lieux");this.lieuxDisponibles=o.data||[]}catch(o){console.error("Erreur m√™me avec chargement de tous les lieux:",o),this.lieuxDisponibles=[]}},async loadSceneLieus(o){try{const e=await a.get(`/api/scene-lieux/scenes/${o}`);this.sceneLieus=e.data}catch(e){console.error("Erreur lors du chargement des lieux de la sc√®ne:",e)}},async addLieuToScene(){var o,e,m;if(!this.selectedLieuId){alert("Veuillez s√©lectionner un lieu");return}try{const c=Number(this.selectedScene.idScene),n=Number(this.selectedLieuId),i=this.selectedPlateauId?Number(this.selectedPlateauId):null,t={sceneId:c,lieuId:n,plateauId:i,descriptionUtilisation:this.lieuDescription||""};console.log("Payload envoy√© (avec v√©rification):",t),console.log("Types des donn√©es:",{sceneId:typeof t.sceneId,lieuId:typeof t.lieuId,plateauId:typeof t.plateauId});const g=await a.post("/api/scene-lieux",t,{headers:{"Content-Type":"application/json"}});console.log("R√©ponse du serveur:",g.data),await this.loadSceneLieus(this.selectedScene.idScene),this.selectedLieuId=null,this.selectedPlateauId=null,this.lieuDescription="",this.plateauxDisponibles=[],alert("Lieu et plateau ajout√©s avec succ√®s √† la sc√®ne!")}catch(c){console.error("Erreur d√©taill√©e:",c),console.error("Donn√©es de l'erreur:",(o=c.response)==null?void 0:o.data),console.error("Status de l'erreur:",(e=c.response)==null?void 0:e.status);let n="Erreur lors de l'ajout du lieu";(m=c.response)!=null&&m.data&&(n+=": "+(c.response.data.message||JSON.stringify(c.response.data))),alert(n)}},async removeLieuFromScene(o){if(confirm("√ätes-vous s√ªr de vouloir supprimer ce lieu de la sc√®ne ?"))try{await a.delete(`/api/scene-lieux/${o}`),await this.loadSceneLieus(this.selectedScene.idScene),alert("Lieu retir√© de la sc√®ne avec succ√®s!")}catch(e){console.error("Erreur lors de la suppression du lieu:",e),alert("Erreur lors de la suppression du lieu")}},async loadLieux(){try{const o=await a.get(`/api/lieux/projets/${this.sequence.projetId}`);this.lieux=o.data}catch(o){console.error("Erreur lors du chargement des lieux:",o)}},async onLieuChange(){if(this.selectedLieuId)try{const o=await a.get(`/api/scene-lieux/lieux/${this.selectedLieuId}/plateaux`);this.plateauxDisponibles=o.data}catch(o){console.error("Erreur lors du chargement des plateaux:",o),this.plateauxDisponibles=[]}else this.plateauxDisponibles=[],this.selectedPlateauId=null},async addSceneLieu(){if(!this.selectedLieu||!this.selectedSceneForLieu){alert("Veuillez s√©lectionner un lieu");return}try{const o={sceneId:this.selectedSceneForLieu.idScene,lieuId:this.selectedLieu,descriptionUtilisation:this.descriptionUtilisation};if(await a.post("/api/scene-lieux",o),this.selectedPlateau){const e={sceneId:this.selectedSceneForLieu.idScene,plateauId:this.selectedPlateau,descriptionUtilisation:this.descriptionUtilisation};await a.post("/api/scene-plateaux",e)}this.closeAddLieuModal(),alert("Lieu et plateau ajout√©s avec succ√®s √† la sc√®ne")}catch(o){console.error("Erreur lors de l'ajout du lieu/plateau:",o),alert("Erreur lors de l'ajout")}},closeAddLieuModal(){this.showAddLieuModal=!1,this.selectedLieuId=null,this.selectedPlateauId=null,this.lieuDescription="",this.plateauxDisponibles=[],this.sceneLieus=[],this.selectedScene={}},async createNewLieu(){try{const o=await a.post("/api/lieux",this.newLieu);await this.loadLieux(),this.selectedLieu=o.data.id,this.newLieuModal=!1,this.newLieu={nomLieu:"",typeLieu:"",adresse:""}}catch(o){console.error("Erreur lors de la cr√©ation du lieu:",o),alert("Erreur lors de la cr√©ation du lieu")}},async createNewPlateau(){if(!this.selectedLieu){alert("Veuillez d'abord s√©lectionner un lieu");return}try{const o={...this.newPlateau,lieuId:this.selectedLieu},e=await a.post("/api/plateaux",o);await this.onLieuChange(),this.selectedPlateau=e.data.id,this.newPlateauModal=!1,this.newPlateau={nom:"",typePlateau:"",description:""}}catch(o){console.error("Erreur lors de la cr√©ation du plateau:",o),alert("Erreur lors de la cr√©ation du plateau")}},closeEditModal(){this.showEditModal=!1,this.editingScene={idScene:null,titre:"",synopsis:"",ordre:null,statutId:null}},async confirmDeleteScene(o){if(confirm("√ätes-vous s√ªr de vouloir supprimer cette sc√®ne ?"))try{await a.delete(`/api/scenes/${o}`),await this.loadScenes()}catch(e){console.error("Erreur lors de la suppression de la sc√®ne:",e)}},async openSynopsisModal(o){this.selectedScene=o,this.showSynopsisModal=!0,await this.loadSceneComediens(o.idScene),await this.loadSceneLieus(o.idScene)},async loadSceneComediens(o){try{const e=await a.get(`/api/comedien-scene/scene/${o}`);console.log("Donn√©es com√©diens:",e.data),this.selectedSceneComediens=e.data}catch(e){console.error("Erreur lors du chargement des com√©diens de la sc√®ne:",e),this.selectedSceneComediens=[]}},async loadSceneLieus(o){try{const e=await a.get(`/api/scene-lieux/scenes/${o}`);this.selectedSceneLieus=e.data}catch(e){console.error("Erreur lors du chargement des lieux de la sc√®ne:",e),this.selectedSceneLieus=[]}},goToAddScene(){this.$router.push(`/sequence/${this.$route.params.id}/add-scene`)},closeSynopsisModal(){this.showSynopsisModal=!1,this.selectedScene={},this.selectedSceneComediens=[],this.selectedSceneLieus=[]},goBack(){this.$router.push(`/episode/${this.sequence.episodeId}/detail-episode`)},formatDate(o){return new Date(o).toLocaleString()},truncateText(o,e){return o?o.length<=e?o:o.substring(0,e)+"...":""},toggleProfileMenu(){this.showProfileMenu=!this.showProfileMenu},handleClickOutside(o){o.target.closest(".profile-section")||(this.showProfileMenu=!1)},seDeconnecter(){localStorage.removeItem("user"),localStorage.removeItem("token"),this.$router.push("/")}}},E={class:"sequence-details-container"},k={class:"main-content"},x={class:"sequence-header"},I={class:"sequence-details"},M={class:"sequence-info"},D={class:"sequence-main"},q={class:"sequence-synopsis"},O={key:0,class:"comment-section"},P={class:"add-comment"},A={class:"comments-list"},N={class:"comment-header"},j={class:"comment-author"},U={class:"comment-date"},T={class:"comment-content"},V={key:0,class:"comment-actions"},F=["onClick"],B={class:"sequence-sidebar"},z={class:"sequence-statut"},R={class:"statut-value"},Y={class:"sequence-date"},J={class:"date-value"},X={class:"sequence-date"},W={class:"date-value"},G={class:"sequence-date"},H={class:"date-value"},K={key:0,class:"sequence-date"},Q={class:"date-value"},Z={class:"scenes-section"},$={class:"section-header"},ee={class:"filters"},se={class:"filter-group"},te={class:"filter-group"},oe=["value"],ne={class:"scenes-list"},ie={class:"scene-header"},re={class:"scene-statut"},le={class:"scene-actions"},de=["onClick"],ae=["onClick"],ue=["onClick"],ce=["onClick"],me={class:"scene-content"},pe={class:"scene-order"},he={class:"scene-dates"},Se={key:0,class:"scene-synopsis"},ge={class:"scene-footer"},ve=["onClick"],ye={key:0,class:"error-message"},fe={class:"form-group"},Ce={class:"form-group"},we={class:"form-group"},Le={key:0,class:"error-text"},be={key:1,class:"suggestion-text"},_e={class:"form-group"},Ee=["value"],ke={class:"form-group"},xe=["value"],Ie={class:"modal-actions"},Me=["disabled"],De={key:0,class:"scene-info-section"},qe={class:"comedien-list"},Oe={class:"comedien-name"},Pe={key:0,class:"comedien-character"},Ae={key:1,class:"scene-info-section"},Ne={class:"location-list"},je={class:"location-info"},Ue={key:0},Te={key:1},Ve={class:"synopsis-content"},Fe={class:"modal-actions"},Be={class:"add-comment"},ze={class:"comments-list"},Re={class:"comment-header"},Ye={class:"comment-author"},Je={class:"comment-date"},Xe={class:"comment-content"},We={key:0,class:"comment-actions"},Ge=["onClick"],He={key:0,class:"no-comments"},Ke={class:"modal-actions"},Qe={class:"form-group"},Ze=["value"],$e={key:0,class:"form-group"},es=["value"],ss={class:"form-group"},ts={class:"modal-actions"},os={key:0,class:"associated-lieux"},ns={class:"scene-lieu-info"},is={key:0},rs=["onClick"];function ls(o,e,m,c,n,i){return r(),l("div",E,[s("main",k,[s("div",x,[s("button",{onClick:e[0]||(e[0]=(...t)=>i.goBack&&i.goBack(...t)),class:"back-btn"},"‚Üê Retour"),e[33]||(e[33]=s("h2",null,"D√©tails de la S√©quence",-1))]),s("div",I,[s("div",M,[s("div",D,[s("h3",null,d(n.sequence.titre),1),s("div",q,[s("h4",null,[e[34]||(e[34]=C("Synopsis ",-1)),s("span",{class:"comment-icon",onClick:e[1]||(e[1]=(...t)=>i.toggleCommentSection&&i.toggleCommentSection(...t))}," üí¨ "+d(n.commentCount),1)]),s("p",null,d(n.sequence.synopsis||"Aucun synopsis disponible"),1),n.showCommentSection?(r(),l("div",O,[e[35]||(e[35]=s("h5",null,"Commentaires",-1)),s("div",P,[p(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>n.newComment=t),placeholder:"Ajouter un commentaire...",rows:"3"},null,512),[[v,n.newComment]]),s("button",{onClick:e[3]||(e[3]=(...t)=>i.addComment&&i.addComment(...t)),class:"add-comment-btn"},"Ajouter")]),s("div",A,[(r(!0),l(h,null,S(n.comments,t=>(r(),l("div",{key:t.id,class:"comment-item"},[s("div",N,[s("span",j,d(t.utilisateurNom),1),s("span",U,d(i.formatDate(t.creeLe)),1)]),s("div",T,d(t.contenu),1),t.utilisateurId===n.user.id?(r(),l("div",V,[s("button",{onClick:g=>i.deleteComment(t.id),class:"delete-comment-btn"},"Supprimer",8,F)])):u("",!0)]))),128))])])):u("",!0)])]),s("div",B,[s("div",z,[e[36]||(e[36]=s("span",{class:"statut-label"},"Statut:",-1)),s("span",R,d(n.sequence.statutNom),1)]),s("div",Y,[e[37]||(e[37]=s("span",{class:"date-label"},"Ordre:",-1)),s("span",J,d(n.sequence.ordre),1)]),s("div",X,[e[38]||(e[38]=s("span",{class:"date-label"},"Cr√©√© le:",-1)),s("span",W,d(i.formatDate(n.sequence.creeLe)),1)]),s("div",G,[e[39]||(e[39]=s("span",{class:"date-label"},"Modifi√© le:",-1)),s("span",H,d(i.formatDate(n.sequence.modifieLe)),1)]),n.sequence.dateFin?(r(),l("div",K,[e[40]||(e[40]=s("span",{class:"date-label"},"Termin√© le:",-1)),s("span",Q,d(i.formatDate(n.sequence.dateFin)),1)])):u("",!0)])])]),s("div",Z,[s("div",$,[e[41]||(e[41]=s("h3",null,"Sc√®nes",-1)),s("button",{class:"add-scene-btn",onClick:e[4]||(e[4]=(...t)=>i.goToAddScene&&i.goToAddScene(...t))},"+ Sc√®ne")]),s("div",ee,[s("div",se,[e[43]||(e[43]=s("label",null,"P√©riode de mise √† jour:",-1)),p(s("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>n.filterTimePeriod=t)},[...e[42]||(e[42]=[L('<option value="all" data-v-69d5df5e>Toutes les p√©riodes</option><option value="today" data-v-69d5df5e>Aujourd&#39;hui</option><option value="this_week" data-v-69d5df5e>Cette semaine</option><option value="this_month" data-v-69d5df5e>Ce mois-ci</option><option value="this_year" data-v-69d5df5e>Cette ann√©e</option><option value="recent" data-v-69d5df5e>R√©cent (7 derniers jours)</option>',6)])],512),[[f,n.filterTimePeriod]])]),s("div",te,[e[45]||(e[45]=s("label",null,"Statut:",-1)),p(s("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>n.filterStatut=t)},[e[44]||(e[44]=s("option",{value:""},"Tous",-1)),(r(!0),l(h,null,S(n.statutsScene,t=>(r(),l("option",{key:t.id,value:t.nomStatutsScene},d(t.nomStatutsScene),9,oe))),128))],512),[[f,n.filterStatut]])])]),s("div",ne,[(r(!0),l(h,null,S(i.filteredScenes,t=>(r(),l("div",{key:t.idScene,class:"scene-card"},[s("div",ie,[s("div",re,d(t.statutNom),1),s("div",le,[s("span",{class:"icon-comment",onClick:g=>i.openSceneComments(t),title:"Commentaires"}," üí¨ "+d(t.commentCount||0),9,de),s("span",{class:"icon-edit",onClick:g=>i.startEditScene(t)},"‚úèÔ∏è",8,ae),s("span",{class:"icon-delete",onClick:g=>i.confirmDeleteScene(t.idScene)},"üóëÔ∏è",8,ue),s("span",{class:"icon-lieu",onClick:g=>i.openAddLieuModal(t),title:"Ajouter un lieu"}," üìç ",8,ce)])]),s("div",me,[s("h4",null,d(t.titre),1),s("p",pe,"Ordre: "+d(t.ordre),1),s("div",he,[s("p",null,"Cr√©√© le: "+d(i.formatDate(t.creeLe)),1),s("p",null,"Modifi√© le: "+d(i.formatDate(t.modifieLe)),1)]),t.synopsis?(r(),l("div",Se,[s("p",null,d(i.truncateText(t.synopsis,100)),1)])):u("",!0),s("div",ge,[s("button",{class:"details-btn",onClick:g=>i.openSynopsisModal(t)},"D√©tails",8,ve)])])]))),128))])]),n.showEditModal?(r(),l("div",{key:0,class:"modal-overlay",onClick:e[16]||(e[16]=(...t)=>i.closeEditModal&&i.closeEditModal(...t))},[s("div",{class:"modal-content",onClick:e[15]||(e[15]=y(()=>{},["stop"]))},[e[51]||(e[51]=s("h3",null,"Modifier la Sc√®ne",-1)),n.editError?(r(),l("div",ye,d(n.editError),1)):u("",!0),s("form",{onSubmit:e[14]||(e[14]=y((...t)=>i.saveEditedScene&&i.saveEditedScene(...t),["prevent"]))},[s("div",fe,[e[46]||(e[46]=s("label",null,"Titre de la sc√®ne:",-1)),p(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>n.editingScene.titre=t),type:"text",required:""},null,512),[[v,n.editingScene.titre]])]),s("div",Ce,[e[47]||(e[47]=s("label",null,"Synopsis:",-1)),p(s("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>n.editingScene.synopsis=t)},null,512),[[v,n.editingScene.synopsis]])]),s("div",we,[e[48]||(e[48]=s("label",null,"Ordre dans la s√©quence:",-1)),p(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>n.editingScene.ordre=t),type:"number",required:"",class:b({"error-input":n.orderError}),onBlur:e[10]||(e[10]=(...t)=>i.validateOrder&&i.validateOrder(...t))},null,34),[[v,n.editingScene.ordre]]),n.orderError?(r(),l("div",Le,d(n.orderError),1)):u("",!0),n.suggestedOrder&&!n.editingScene.ordre?(r(),l("div",be,[C(" Suggestion: Le prochain ordre disponible est "+d(n.suggestedOrder)+" ",1),s("button",{type:"button",onClick:e[11]||(e[11]=(...t)=>i.useSuggestedOrder&&i.useSuggestedOrder(...t)),class:"suggestion-btn"}," Utiliser cette valeur ")])):u("",!0)]),s("div",_e,[e[49]||(e[49]=s("label",null,"Titre de la s√©quence:",-1)),s("input",{value:n.sequence.titre,type:"text",disabled:""},null,8,Ee)]),s("div",ke,[e[50]||(e[50]=s("label",null,"Statut:",-1)),p(s("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>n.editingScene.statutId=t),required:""},[(r(!0),l(h,null,S(n.statutsScene,t=>(r(),l("option",{key:t.id,value:t.id},d(t.nomStatutsScene),9,xe))),128))],512),[[f,n.editingScene.statutId]])]),s("div",Ie,[s("button",{type:"submit",class:"save-btn",disabled:n.orderError!==""},"Sauvegarder",8,Me),s("button",{type:"button",onClick:e[13]||(e[13]=(...t)=>i.closeEditModal&&i.closeEditModal(...t)),class:"cancel-btn"},"Annuler")])],32)])])):u("",!0),n.showSynopsisModal?(r(),l("div",{key:1,class:"modal-overlay",onClick:e[19]||(e[19]=(...t)=>i.closeSynopsisModal&&i.closeSynopsisModal(...t))},[s("div",{class:"modal-content synopsis-modal",onClick:e[18]||(e[18]=y(()=>{},["stop"]))},[s("h3",null,d(n.selectedScene.titre),1),n.selectedSceneComediens.length>0?(r(),l("div",De,[e[52]||(e[52]=s("h4",null,"Com√©diens dans cette sc√®ne",-1)),s("div",qe,[(r(!0),l(h,null,S(n.selectedSceneComediens,t=>(r(),l("div",{key:t.id,class:"comedien-item"},[s("span",Oe,d(t.comedienNom),1),t.personnageNom?(r(),l("span",Pe,"("+d(t.personnageNom)+")",1)):u("",!0)]))),128))])])):u("",!0),n.selectedSceneLieus.length>0?(r(),l("div",Ae,[e[53]||(e[53]=s("h4",null,"Lieux et plateaux",-1)),s("div",Ne,[(r(!0),l(h,null,S(n.selectedSceneLieus,t=>(r(),l("div",{key:t.id,class:"location-item"},[s("div",je,[s("strong",null,d(t.lieuNom),1),t.plateauNom?(r(),l("span",Ue," - Plateau: "+d(t.plateauNom),1)):u("",!0),t.descriptionUtilisation?(r(),l("span",Te," ("+d(t.descriptionUtilisation)+")",1)):u("",!0)])]))),128))])])):u("",!0),s("div",Ve,[e[54]||(e[54]=s("h4",null,"Synopsis",-1)),s("p",null,d(n.selectedScene.synopsis||"Aucun synopsis disponible"),1)]),s("div",Fe,[s("button",{type:"button",onClick:e[17]||(e[17]=(...t)=>i.closeSynopsisModal&&i.closeSynopsisModal(...t)),class:"cancel-btn"},"Fermer")])])])):u("",!0),n.showSceneCommentModal?(r(),l("div",{key:2,class:"modal-overlay",onClick:e[24]||(e[24]=t=>n.showSceneCommentModal=!1)},[s("div",{class:"modal-content",onClick:e[23]||(e[23]=y(()=>{},["stop"]))},[s("h3",null,"Commentaires - "+d(n.selectedScene.titre),1),s("div",Be,[p(s("textarea",{"onUpdate:modelValue":e[20]||(e[20]=t=>n.newSceneComment=t),placeholder:"Ajouter un commentaire...",rows:"3"},null,512),[[v,n.newSceneComment]]),s("button",{onClick:e[21]||(e[21]=(...t)=>i.addSceneComment&&i.addSceneComment(...t)),class:"add-comment-btn"},"Ajouter")]),s("div",ze,[(r(!0),l(h,null,S(n.sceneComments,t=>(r(),l("div",{key:t.id,class:"comment-item"},[s("div",Re,[s("span",Ye,d(t.utilisateurNom),1),s("span",Je,d(i.formatDate(t.creeLe)),1)]),s("div",Xe,d(t.contenu),1),t.utilisateurId===n.user.id?(r(),l("div",We,[s("button",{onClick:g=>i.deleteSceneComment(t.id),class:"delete-comment-btn"},"Supprimer",8,Ge)])):u("",!0)]))),128)),n.sceneComments.length===0?(r(),l("div",He," Aucun commentaire pour cette sc√®ne. ")):u("",!0)]),s("div",Ke,[s("button",{type:"button",onClick:e[22]||(e[22]=t=>n.showSceneCommentModal=!1),class:"cancel-btn"},"Fermer")])])])):u("",!0),n.showAddLieuModal?(r(),l("div",{key:3,class:"modal-overlay",onClick:e[32]||(e[32]=(...t)=>i.closeAddLieuModal&&i.closeAddLieuModal(...t))},[s("div",{class:"modal-content",onClick:e[31]||(e[31]=y(()=>{},["stop"]))},[s("h3",null,"Ajouter un lieu √† la sc√®ne: "+d(n.selectedScene.titre),1),s("form",{onSubmit:e[30]||(e[30]=y((...t)=>i.addLieuToScene&&i.addLieuToScene(...t),["prevent"]))},[s("div",Qe,[e[56]||(e[56]=s("label",null,"S√©lectionner un lieu:",-1)),p(s("select",{"onUpdate:modelValue":e[25]||(e[25]=t=>n.selectedLieuId=t),onChange:e[26]||(e[26]=(...t)=>i.onLieuChange&&i.onLieuChange(...t)),required:""},[e[55]||(e[55]=s("option",{value:"",disabled:""},"S√©lectionner un lieu",-1)),(r(!0),l(h,null,S(n.lieuxDisponibles,t=>(r(),l("option",{key:t.id,value:t.id},d(t.nomLieu)+" ("+d(t.typeLieu)+") ",9,Ze))),128))],544),[[f,n.selectedLieuId]])]),n.plateauxDisponibles.length>0?(r(),l("div",$e,[e[58]||(e[58]=s("label",null,"S√©lectionner un plateau (optionnel):",-1)),p(s("select",{"onUpdate:modelValue":e[27]||(e[27]=t=>n.selectedPlateauId=t)},[e[57]||(e[57]=s("option",{value:"",disabled:""},"S√©lectionner un plateau",-1)),(r(!0),l(h,null,S(n.plateauxDisponibles,t=>(r(),l("option",{key:t.id,value:t.id},d(t.nom)+" ("+d(t.typePlateau)+") ",9,es))),128))],512),[[f,n.selectedPlateauId]])])):u("",!0),s("div",ss,[e[59]||(e[59]=s("label",null,"Description d'utilisation:",-1)),p(s("textarea",{"onUpdate:modelValue":e[28]||(e[28]=t=>n.lieuDescription=t),placeholder:"Ex: Jour, Nuit, Int√©rieur, Ext√©rieur...",rows:"3"},null,512),[[v,n.lieuDescription]])]),s("div",ts,[e[60]||(e[60]=s("button",{type:"submit",class:"save-btn"},"Ajouter",-1)),s("button",{type:"button",onClick:e[29]||(e[29]=(...t)=>i.closeAddLieuModal&&i.closeAddLieuModal(...t)),class:"cancel-btn"},"Annuler")])],32),n.sceneLieus.length>0?(r(),l("div",os,[e[61]||(e[61]=s("h4",null,"Lieux d√©j√† associ√©s:",-1)),(r(!0),l(h,null,S(n.sceneLieus,t=>(r(),l("div",{key:t.id,class:"scene-lieu-item"},[s("div",ns,[s("strong",null,d(t.lieuNom),1),t.plateauNom?(r(),l("span",is," - Plateau: "+d(t.plateauNom),1)):u("",!0),C(" - "+d(t.descriptionUtilisation||"Aucune description"),1)]),s("button",{onClick:g=>i.removeLieuFromScene(t.id),class:"delete-btn",title:"Supprimer"}," üóëÔ∏è ",8,rs)]))),128))])):u("",!0)])])):u("",!0)])])}const as=w(_,[["render",ls],["__scopeId","data-v-69d5df5e"]]);export{as as default};
