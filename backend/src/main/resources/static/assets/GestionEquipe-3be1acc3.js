import{_ as S,o as l,c as n,b as s,n as b,d as m,h as f,w as u,v as d,e as v,f as y,t as p,F as g,r as h}from"./index-c433af20.js";const E={name:"GestionEquipe",data(){return{activeTab:"scenariste",recherche:"",filtreRole:"tous",chargement:!1,scenaristes:[],realisateurs:[],membreAModifier:null,nouveauScenariste:{nom:"",email:"",motDePasse:"",specialite:"",biographie:""},nouveauRealisateur:{nom:"",email:"",motDePasse:"",specialite:"",biographie:""}}},computed:{scenaristesFiltres(){let t=this.scenaristes;if(this.recherche){const e=this.recherche.toLowerCase();t=t.filter(o=>o.nom.toLowerCase().includes(e)||o.email.toLowerCase().includes(e)||o.specialite&&o.specialite.toLowerCase().includes(e))}return t},realisateursFiltres(){let t=this.realisateurs;if(this.recherche){const e=this.recherche.toLowerCase();t=t.filter(o=>o.nom.toLowerCase().includes(e)||o.email.toLowerCase().includes(e)||o.specialite&&o.specialite.toLowerCase().includes(e))}return t}},async mounted(){await this.chargerEquipe()},methods:{async chargerEquipe(){try{const[t,e]=await Promise.all([fetch("/api/utilisateurs/scenaristes"),fetch("/api/utilisateurs/realisateurs")]);t.ok?this.scenaristes=await t.json():console.error("Erreur chargement scénaristes:",t.status),e.ok?this.realisateurs=await e.json():console.error("Erreur chargement réalisateurs:",e.status)}catch(t){console.error("Erreur lors du chargement de l'équipe:",t),alert("Erreur lors du chargement des données")}},async creerScenariste(){this.chargement=!0;try{const t=await fetch("/api/utilisateurs/creer-scenariste",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.nouveauScenariste)});if(t.ok)await this.chargerEquipe(),this.reinitialiserFormulaireScenariste(),alert("Scénariste créé avec succès!");else{const e=await t.json();throw new Error(e.message||"Erreur lors de la création")}}catch(t){console.error("Erreur:",t),alert("Erreur lors de la création du scénariste: "+t.message)}finally{this.chargement=!1}},async creerRealisateur(){this.chargement=!0;try{const t=await fetch("/api/utilisateurs/creer-realisateur",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.nouveauRealisateur)});if(t.ok)await this.chargerEquipe(),this.reinitialiserFormulaireRealisateur(),alert("Réalisateur créé avec succès!");else{const e=await t.json();throw new Error(e.message||"Erreur lors de la création")}}catch(t){console.error("Erreur:",t),alert("Erreur lors de la création du réalisateur: "+t.message)}finally{this.chargement=!1}},modifierScenariste(t){this.membreAModifier={...t,type:"SCENARISTE"}},modifierRealisateur(t){this.membreAModifier={...t,type:"REALISATEUR"}},async sauvegarderModification(){try{const t=this.membreAModifier.type==="SCENARISTE"?`/api/utilisateurs/scenaristes/${this.membreAModifier.idScenariste}`:`/api/utilisateurs/realisateurs/${this.membreAModifier.idRealisateur}`,e=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.membreAModifier)});if(e.ok)await this.chargerEquipe(),this.annulerModification(),alert("Modification sauvegardée!");else{const o=await e.json();throw new Error(o.message||"Erreur lors de la modification")}}catch(t){console.error("Erreur:",t),alert("Erreur lors de la modification: "+t.message)}},async supprimerScenariste(t){if(confirm("Êtes-vous sûr de vouloir supprimer ce scénariste ?"))try{const e=await fetch(`/api/utilisateurs/scenaristes/${t}`,{method:"DELETE"});if(e.ok)await this.chargerEquipe(),alert("Scénariste supprimé avec succès!");else{const o=await e.json();throw new Error(o.message||"Erreur lors de la suppression")}}catch(e){console.error("Erreur:",e),alert("Erreur lors de la suppression: "+e.message)}},async supprimerRealisateur(t){if(confirm("Êtes-vous sûr de vouloir supprimer ce réalisateur ?"))try{const e=await fetch(`/api/utilisateurs/realisateurs/${t}`,{method:"DELETE"});if(e.ok)await this.chargerEquipe(),alert("Réalisateur supprimé avec succès!");else{const o=await e.json();throw new Error(o.message||"Erreur lors de la suppression")}}catch(e){console.error("Erreur:",e),alert("Erreur lors de la suppression: "+e.message)}},annulerModification(){this.membreAModifier=null},reinitialiserFormulaireScenariste(){this.nouveauScenariste={nom:"",email:"",motDePasse:"",specialite:"",biographie:""}},reinitialiserFormulaireRealisateur(){this.nouveauRealisateur={nom:"",email:"",motDePasse:"",specialite:"",biographie:""}}}},R={class:"gestion-equipe"},w={class:"tabs"},M={class:"form-container"},C={key:0,class:"form-section"},k={class:"form-group"},A={class:"form-group"},T={class:"form-group"},q={class:"form-group"},x={class:"form-group"},D=["disabled"],U={key:0},V={key:1},N={key:1,class:"form-section"},F={class:"form-group"},L={class:"form-group"},P={class:"form-group"},j={class:"form-group"},B={class:"form-group"},I=["disabled"],O={key:0},G={key:1},J={class:"search-section"},_={class:"search-bar"},z={class:"filters"},H={class:"liste-equipe"},K={class:"role-section"},Q={key:0,class:"empty-state"},W={key:1,class:"cards-container"},X={class:"member-header"},Y={class:"member-info"},Z={class:"member-email"},$={class:"member-details"},ee={class:"member-actions"},se=["onClick"],re=["onClick"],ie={class:"role-section"},te={key:0,class:"empty-state"},ae={key:1,class:"cards-container"},oe={class:"member-header"},le={class:"member-info"},ne={class:"member-email"},ue={class:"member-details"},de={class:"member-actions"},me=["onClick"],pe=["onClick"],ce={key:0,class:"modal-overlay"},fe={class:"modal"},ve={class:"form-group"},be={class:"form-group"},ge={class:"form-group"},he={class:"form-group"},Se={class:"modal-actions"};function ye(t,e,o,Ee,i,a){return l(),n("div",R,[e[59]||(e[59]=s("div",{class:"header"},[s("h1",null,"Gestion de l'Équipe Créative"),s("p",null,"Créez et gérez les scénaristes et réalisateurs de vos projets")],-1)),s("div",w,[s("button",{onClick:e[0]||(e[0]=r=>i.activeTab="scenariste"),class:b([{active:i.activeTab==="scenariste"},"tab-button"])},[...e[22]||(e[22]=[s("i",{class:"fas fa-pen-fancy"},null,-1),m(" Scénariste ",-1)])],2),s("button",{onClick:e[1]||(e[1]=r=>i.activeTab="realisateur"),class:b([{active:i.activeTab==="realisateur"},"tab-button"])},[...e[23]||(e[23]=[s("i",{class:"fas fa-video"},null,-1),m(" Réalisateur ",-1)])],2)]),s("div",M,[i.activeTab==="scenariste"?(l(),n("div",C,[e[29]||(e[29]=s("h2",null,"Créer un nouveau Scénariste",-1)),s("form",{onSubmit:e[7]||(e[7]=f((...r)=>a.creerScenariste&&a.creerScenariste(...r),["prevent"])),class:"creation-form"},[s("div",k,[e[24]||(e[24]=s("label",{for:"nomScenariste"},"Nom complet *",-1)),u(s("input",{id:"nomScenariste","onUpdate:modelValue":e[2]||(e[2]=r=>i.nouveauScenariste.nom=r),type:"text",required:"",placeholder:"Ex: Jean Dupont"},null,512),[[d,i.nouveauScenariste.nom]])]),s("div",A,[e[25]||(e[25]=s("label",{for:"emailScenariste"},"Email *",-1)),u(s("input",{id:"emailScenariste","onUpdate:modelValue":e[3]||(e[3]=r=>i.nouveauScenariste.email=r),type:"email",required:"",placeholder:"exemple@email.com"},null,512),[[d,i.nouveauScenariste.email]])]),s("div",T,[e[26]||(e[26]=s("label",{for:"passwordScenariste"},"Mot de passe *",-1)),u(s("input",{id:"passwordScenariste","onUpdate:modelValue":e[4]||(e[4]=r=>i.nouveauScenariste.motDePasse=r),type:"password",required:"",placeholder:"Minimum 8 caractères"},null,512),[[d,i.nouveauScenariste.motDePasse]])]),s("div",q,[e[27]||(e[27]=s("label",{for:"specialiteScenariste"},"Spécialité",-1)),u(s("input",{id:"specialiteScenariste","onUpdate:modelValue":e[5]||(e[5]=r=>i.nouveauScenariste.specialite=r),type:"text",placeholder:"Ex: Comédie, Drame, etc."},null,512),[[d,i.nouveauScenariste.specialite]])]),s("div",x,[e[28]||(e[28]=s("label",{for:"biographieScenariste"},"Biographie",-1)),u(s("textarea",{id:"biographieScenariste","onUpdate:modelValue":e[6]||(e[6]=r=>i.nouveauScenariste.biographie=r),rows:"4",placeholder:"Description du scénariste..."},null,512),[[d,i.nouveauScenariste.biographie]])]),s("button",{type:"submit",class:"btn-primary",disabled:i.chargement},[i.chargement?(l(),n("span",U,"Création...")):(l(),n("span",V,"Créer le Scénariste"))],8,D)],32)])):v("",!0),i.activeTab==="realisateur"?(l(),n("div",N,[e[35]||(e[35]=s("h2",null,"Créer un nouveau Réalisateur",-1)),s("form",{onSubmit:e[13]||(e[13]=f((...r)=>a.creerRealisateur&&a.creerRealisateur(...r),["prevent"])),class:"creation-form"},[s("div",F,[e[30]||(e[30]=s("label",{for:"nomRealisateur"},"Nom complet *",-1)),u(s("input",{id:"nomRealisateur","onUpdate:modelValue":e[8]||(e[8]=r=>i.nouveauRealisateur.nom=r),type:"text",required:"",placeholder:"Ex: Sophie Martin"},null,512),[[d,i.nouveauRealisateur.nom]])]),s("div",L,[e[31]||(e[31]=s("label",{for:"emailRealisateur"},"Email *",-1)),u(s("input",{id:"emailRealisateur","onUpdate:modelValue":e[9]||(e[9]=r=>i.nouveauRealisateur.email=r),type:"email",required:"",placeholder:"exemple@email.com"},null,512),[[d,i.nouveauRealisateur.email]])]),s("div",P,[e[32]||(e[32]=s("label",{for:"passwordRealisateur"},"Mot de passe *",-1)),u(s("input",{id:"passwordRealisateur","onUpdate:modelValue":e[10]||(e[10]=r=>i.nouveauRealisateur.motDePasse=r),type:"password",required:"",placeholder:"Minimum 8 caractères"},null,512),[[d,i.nouveauRealisateur.motDePasse]])]),s("div",j,[e[33]||(e[33]=s("label",{for:"specialiteRealisateur"},"Spécialité",-1)),u(s("input",{id:"specialiteRealisateur","onUpdate:modelValue":e[11]||(e[11]=r=>i.nouveauRealisateur.specialite=r),type:"text",placeholder:"Ex: Thriller, Romance, etc."},null,512),[[d,i.nouveauRealisateur.specialite]])]),s("div",B,[e[34]||(e[34]=s("label",{for:"biographieRealisateur"},"Biographie",-1)),u(s("textarea",{id:"biographieRealisateur","onUpdate:modelValue":e[12]||(e[12]=r=>i.nouveauRealisateur.biographie=r),rows:"4",placeholder:"Description du réalisateur..."},null,512),[[d,i.nouveauRealisateur.biographie]])]),s("button",{type:"submit",class:"btn-primary",disabled:i.chargement},[i.chargement?(l(),n("span",O,"Création...")):(l(),n("span",G,"Créer le Réalisateur"))],8,I)],32)])):v("",!0)]),s("div",J,[s("div",_,[e[36]||(e[36]=s("i",{class:"fas fa-search"},null,-1)),u(s("input",{"onUpdate:modelValue":e[14]||(e[14]=r=>i.recherche=r),type:"text",placeholder:"Rechercher par nom, email ou spécialité...",class:"search-input"},null,512),[[d,i.recherche]])]),s("div",z,[u(s("select",{"onUpdate:modelValue":e[15]||(e[15]=r=>i.filtreRole=r),class:"filter-select"},[...e[37]||(e[37]=[s("option",{value:"tous"},"Tous les rôles",-1),s("option",{value:"SCENARISTE"},"Scénaristes",-1),s("option",{value:"REALISATEUR"},"Réalisateurs",-1)])],512),[[y,i.filtreRole]])])]),s("div",H,[s("div",K,[s("h3",null,[e[38]||(e[38]=s("i",{class:"fas fa-pen-fancy"},null,-1)),m(" Scénaristes ("+p(a.scenaristesFiltres.length)+") ",1)]),a.scenaristesFiltres.length===0?(l(),n("div",Q,[...e[39]||(e[39]=[s("p",null,"Aucun scénariste trouvé",-1)])])):(l(),n("div",W,[(l(!0),n(g,null,h(a.scenaristesFiltres,r=>(l(),n("div",{key:r.idScenariste,class:"member-card"},[s("div",X,[e[41]||(e[41]=s("div",{class:"member-avatar"},[s("i",{class:"fas fa-user"})],-1)),s("div",Y,[s("h4",null,p(r.nom),1),s("p",Z,p(r.email),1),e[40]||(e[40]=s("span",{class:"role-badge scenariste"},"Scénariste",-1))])]),s("div",$,[s("p",null,[e[42]||(e[42]=s("strong",null,"Spécialité:",-1)),m(" "+p(r.specialite||"Non spécifiée"),1)]),s("p",null,[e[43]||(e[43]=s("strong",null,"Biographie:",-1)),m(" "+p(r.biographie||"Non renseignée"),1)])]),s("div",ee,[s("button",{onClick:c=>a.modifierScenariste(r),class:"btn-edit"},[...e[44]||(e[44]=[s("i",{class:"fas fa-edit"},null,-1),m(" Modifier ",-1)])],8,se),s("button",{onClick:c=>a.supprimerScenariste(r.idScenariste),class:"btn-delete"},[...e[45]||(e[45]=[s("i",{class:"fas fa-trash"},null,-1),m(" Supprimer ",-1)])],8,re)])]))),128))]))]),s("div",ie,[s("h3",null,[e[46]||(e[46]=s("i",{class:"fas fa-video"},null,-1)),m(" Réalisateurs ("+p(a.realisateursFiltres.length)+") ",1)]),a.realisateursFiltres.length===0?(l(),n("div",te,[...e[47]||(e[47]=[s("p",null,"Aucun réalisateur trouvé",-1)])])):(l(),n("div",ae,[(l(!0),n(g,null,h(a.realisateursFiltres,r=>(l(),n("div",{key:r.idRealisateur,class:"member-card"},[s("div",oe,[e[49]||(e[49]=s("div",{class:"member-avatar"},[s("i",{class:"fas fa-user"})],-1)),s("div",le,[s("h4",null,p(r.nom),1),s("p",ne,p(r.email),1),e[48]||(e[48]=s("span",{class:"role-badge realisateur"},"Réalisateur",-1))])]),s("div",ue,[s("p",null,[e[50]||(e[50]=s("strong",null,"Spécialité:",-1)),m(" "+p(r.specialite||"Non spécifiée"),1)]),s("p",null,[e[51]||(e[51]=s("strong",null,"Biographie:",-1)),m(" "+p(r.biographie||"Non renseignée"),1)])]),s("div",de,[s("button",{onClick:c=>a.modifierRealisateur(r),class:"btn-edit"},[...e[52]||(e[52]=[s("i",{class:"fas fa-edit"},null,-1),m(" Modifier ",-1)])],8,me),s("button",{onClick:c=>a.supprimerRealisateur(r.idRealisateur),class:"btn-delete"},[...e[53]||(e[53]=[s("i",{class:"fas fa-trash"},null,-1),m(" Supprimer ",-1)])],8,pe)])]))),128))]))])]),i.membreAModifier?(l(),n("div",ce,[s("div",fe,[s("h3",null,"Modifier "+p(i.membreAModifier.nom),1),s("form",{onSubmit:e[21]||(e[21]=f((...r)=>a.sauvegarderModification&&a.sauvegarderModification(...r),["prevent"]))},[s("div",ve,[e[54]||(e[54]=s("label",null,"Nom complet",-1)),u(s("input",{"onUpdate:modelValue":e[16]||(e[16]=r=>i.membreAModifier.nom=r),type:"text",required:""},null,512),[[d,i.membreAModifier.nom]])]),s("div",be,[e[55]||(e[55]=s("label",null,"Email",-1)),u(s("input",{"onUpdate:modelValue":e[17]||(e[17]=r=>i.membreAModifier.email=r),type:"email",required:""},null,512),[[d,i.membreAModifier.email]])]),s("div",ge,[e[56]||(e[56]=s("label",null,"Spécialité",-1)),u(s("input",{"onUpdate:modelValue":e[18]||(e[18]=r=>i.membreAModifier.specialite=r),type:"text"},null,512),[[d,i.membreAModifier.specialite]])]),s("div",he,[e[57]||(e[57]=s("label",null,"Biographie",-1)),u(s("textarea",{"onUpdate:modelValue":e[19]||(e[19]=r=>i.membreAModifier.biographie=r),rows:"4"},null,512),[[d,i.membreAModifier.biographie]])]),s("div",Se,[s("button",{type:"button",onClick:e[20]||(e[20]=(...r)=>a.annulerModification&&a.annulerModification(...r)),class:"btn-secondary"}," Annuler "),e[58]||(e[58]=s("button",{type:"submit",class:"btn-primary"},"Sauvegarder",-1))])],32)])])):v("",!0)])}const we=S(E,[["render",ye],["__scopeId","data-v-38350fb4"]]);export{we as default};
